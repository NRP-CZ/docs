import { Badge } from "@/components/badge";

# Migrations & Updates

## oarepo-ui Runtime Template Update

<Badge variant="yellow">oarepo-ui PR #409</Badge>
<Badge>February 2026</Badge>

### Who needs to act?

**You are affected if:**
- Your model was created before February 2026
- You use default templates (no custom `templates` or `resource_templates` in UI config)
- You are upgrading oarepo-ui

**You are NOT affected if:**
- Your model was generated with nrp-model-copier after February 2026
- You have custom templates configured

### What changed

oarepo-ui's runtime generator now produces JinjaX components that extend your model's base template instead of directly extending `oarepo_ui/*` templates:

```
Runtime Generated Component → mymodel/record_detail.html → oarepo_ui/record_detail.html
```

Base templates now include your partials (`banners.html`, `main.html`, `side_bar.html`).

### Required changes

Create these files in your UI module:

**`ui/mymodel/templates/semantic-ui/mymodel/record_detail.html`**
```jinja
{% extends "oarepo_ui/record_detail.html" %}
{%- block page_banners %}{% include "mymodel/record_detail/banners.html" %}{%- endblock %}
{%- block page_main %}{% include "mymodel/record_detail/main.html" %}{%- endblock %}
{%- block record_sidebar %}{% include "mymodel/record_detail/side_bar.html" ignore missing %}{%- endblock %}
```

**`ui/mymodel/templates/semantic-ui/mymodel/record_search.html`**
```jinja
{% extends "oarepo_ui/record_search.html" %}
{%- block javascript %}{{ super() }}{{ webpack["mymodel_search_app.js"] }}{%- endblock %}
```
*Replace `mymodel_search_app.js` with your webpack entry name.*

**`ui/mymodel/templates/semantic-ui/mymodel/deposit_create.html`**
```jinja
{% extends "oarepo_ui/base_deposit.html" %}
```

**`ui/mymodel/templates/semantic-ui/mymodel/deposit_edit.html`**
```jinja
{% extends "oarepo_ui/base_deposit.html" %}
```

### Verify after migration

1. Build assets: `cd ui/mymodel && npm run build`
2. Test: record detail page, search page, deposit forms

### Common issues

| Error | Fix |
|-------|-----|
| `TemplateNotFound: mymodel/record_detail.html` | Create base template file |
| Partials not showing | Check `record_detail/banners.html` and `main.html` exist |
| Search JS errors | Verify webpack entry name matches `webpack.py` |

---

