import { Cards } from "nextra/components";
import { Card } from "@/components/card";

# Search UI Components

This page documents the React components available for customizing record search pages. For deposit form components, see [Deposit Form Components](/customize/model_ui/deposit_components). For search page configuration, see [Search page](/customize/model_ui/search).

## Search App Configuration

The search page uses the **react-searchkit** library with custom layout and result components. The search is configured through the `oarepo_ui.search` module:

```jsx filename="ui/{{model_name}}/semantic-ui/js/{{model_name}}/search/index.js"
import {
  parseSearchAppConfigs,
  createSearchAppsInit,
} from "@js/oarepo_ui/search";
import ResultsListItem from "./ResultsListItem";

export const componentOverrides = {
  // Override the default result list item
  `${overridableIdPrefix}.ResultsList.item`: ResultsListItem,
};
```

For more on search endpoint configuration, see [Search page](/customize/model_ui/search#search-endpoint-configuration).

## Components

### ResultsList (Custom)

The `ResultsList` displays search results using customizable list items. You override the individual item component to control how each result appears.

The nrp-model-copier template provides a `ResultsListItem` component at the model's search directory. This is the component you customize to match your record's metadata:

```jsx filename="ui/{{model_name}}/semantic-ui/js/{{model_name}}/search/ResultsListItem.jsx"
import React from "react";
import PropTypes from "prop-types";
import _get from "lodash/get";
import _join from "lodash/join";
import { Grid, Item, Label } from "semantic-ui-react";
import { i18next } from "@translations/i18next";

export const ResultsListItem = ({ result, ...rest }) => {
  const accessRights = _get(result, "ui.access_status", null);
  const createdDate = _get(
    result,
    "ui.created_date_l10n_short",
    "No creation date found."
  );
  const languages = _get(result, "metadata.languages", []);
  const version = _get(result, "metadata.version", null);
  const title = _get(result, "metadata.title", i18next.t("No title"));

  return (
    <Item key={result.id} data-testid="result-item">
      <Item.Content>
        <Grid>
          <Grid.Row>
            <Grid.Column className="results-list item-main">
              <div className="justify-space-between flex">
                <Item.Header as="h2">
                  <a href={result.links.self_html}>{title}</a>
                </Item.Header>
                <div className="item-access-rights">
                  {result.state && (
                    <Label title={result.state_timestamp}>{result.state}</Label>
                  )}
                  {accessRights && accessRights.id !== "open" && (
                    <Label title={`${accessRights.description_l10n}`}>
                      {accessRights.title_l10n}
                    </Label>
                  )}
                </div>
              </div>
              <Item.Meta>
                <Grid columns={1}>
                  <Grid.Column>
                    <Grid.Row className="ui separated">
                      <span
                        aria-label={i18next.t("Languages")}
                        title={i18next.t("Languages")}
                      >
                        {_join(languages.map((l) => l.title), ", ")}
                      </span>
                    </Grid.Row>
                  </Grid.Column>
                </Grid>
              </Item.Meta>
              <Item.Extra>
                <div>
                  <small>
                    <p>
                      {createdDate && (
                        <>
                          {i18next.t("Uploaded on")} <span>{createdDate}</span>{" "}
                          {version && `(${i18next.t("version")}: ${version})`}
                        </>
                      )}
                    </p>
                  </small>
                </div>
              </Item.Extra>
            </Grid.Column>
          </Grid.Row>
        </Grid>
      </Item.Content>
    </Item>
  );
};

ResultsListItem.propTypes = {
  result: PropTypes.object.isRequired,
};

export default ResultsListItem;
```

**Source:** Model-specific (via [nrp-model-copier](https://github.com/oarepo/nrp-model-copier/tree/21e842ec50eaf3f484e27ce52c5df80e3af592da/template/ui/%7B%7Bmodel_name%7D%7D/semantic-ui/js/%7B%7Bmodel_name%7D%7D/search))

**Based on:** `react-searchkit` ResultsList item

**Prop:**

| Prop | Type | Required | Description |
|------|------|----------|-------------|
| `result` | object | yes | Search result object from API |

**Result object structure:**

| Path | Type | Description |
|------|------|-------------|
| `result.id` | string | Record ID |
| `result.links.self_html` | string | Link to record detail page |
| `result.state` | string | Record state (e.g., "draft", "published") |
| `result.state_timestamp` | string | State change timestamp |
| `result.ui.access_status` | object | Access rights with `id` and `title_l10n` |
| `result.ui.created_date_l10n_short` | string | Formatted creation date |
| `result.metadata.title` | string | Record title |
| `result.metadata.languages` | array | Array of language objects with `title` |
| `result.metadata.version` | string | Record version |

## Search Layout Components

Components from [oarepo-ui/search](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search) for customizing search UI layout:

### RecordsList

Container component that renders the list of search results with loading and empty states:

```jsx
import { RecordsList } from "@js/oarepo_ui/search";

<RecordsList loading={loading} totalResults={totalResults}>
  <YourCustomResultsItems />
</RecordsList>
```

**Source:** [oarepo-ui/RecordsList](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search/RecordsList)

### ResultsList

Wrapper for search result items using react-overridable:

```jsx
import { ResultsList } from "@js/oarepo_ui/search";

<ResultsList />
```

**Source:** [oarepo-ui/ResultsList](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search/ResultsList)

### DynamicResultsListItem

Dynamic result item component that handles loading and error states:

```jsx
import { DynamicResultsListItem } from "@js/oarepo_ui/search";

<DynamicResultsListItem result={result} loading={loading} error={error} />
```

**Source:** [oarepo-ui/DynamicResultsListItem](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search/DynamicResultsListItem)

### SearchAppLayout

Main layout component for the search page - contains facets and results:

```jsx
import { SearchAppLayout } from "@js/oarepo_ui/search";

<SearchAppLayout>
  <SearchAppFacets />
  <SearchAppResults />
</SearchAppLayout>
```

**Source:** [oarepo-ui/SearchAppLayout](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search/SearchAppLayout)

### SearchAppLayoutWithSearchbar

Layout with integrated search bar at the top:

```jsx
import { SearchAppLayoutWithSearchbar } from "@js/oarepo_ui/search";

<SearchAppLayoutWithSearchbar>
  <YourSearchComponents />
</SearchAppLayoutWithSearchbar>
```

**Source:** [oarepo-ui/SearchAppLayoutWithSearchbar](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search/SearchAppLayoutWithSearchbar)

### SearchAppFacets

Facet/aggregation panel component for filters:

```jsx
import { SearchAppFacets } from "@js/oarepo_ui/search";

<SearchAppFacets />
```

**Source:** [oarepo-ui/SearchAppFacets](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search/SearchAppFacets)

### BucketAggregationElement

Single bucket aggregation facet component:

```jsx
import { BucketAggregationElement } from "@js/oarepo_ui/search";

<BucketAggregationElement title="Resource Type" bucketAggKey="resource_type" />
```

**Source:** [oarepo-ui/BucketAggregationElement](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search/BucketAggregationElement)

### FoldableBucketAggregationElement

Foldable bucket aggregation for hierarchical facets:

```jsx
import { FoldableBucketAggregationElement } from "@js/oarepo_ui/search";

<FoldableBucketAggregationElement title="Subject Categories" bucketAggKey="subject" />
```

**Source:** [oarepo-ui/FoldableBucketAggregationElement](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search/FoldableBucketAggregationElement)

### SearchBar Components

#### SearchAppSearchbarContainer

Container for search bar component:

```jsx
import { SearchAppSearchbarContainer } from "@js/oarepo_ui/search";

<SearchAppSearchbarContainer>
  <YourSearchbar />
</SearchAppSearchbarContainer>
```

**Source:** [oarepo-ui/SearchAppSearchbarContainer](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search/SearchAppSearchbarContainer)

#### ClearableSearchbarElement

Single-line search bar with clear button:

```jsx
import { ClearableSearchbarElement } from "@js/oarepo_ui/search";

<ClearableSearchbarElement
  placeholder="Search records..."
  queryHelperSchema={queryHelperSchema}
/>
```

**Source:** [oarepo-ui/ClearableSearchbarElement](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search/ClearableSearchbarElement)

#### MultilineSearchbarElement

Multi-line search bar for complex queries:

```jsx
import { MultilineSearchbarElement } from "@js/oarepo_ui/search";

<MultilineSearchbarElement
  placeholder="Search records..."
  queryHelperSchema={queryHelperSchema}
/>
```

**Source:** [oarepo-ui/MultilineSearchbarElement](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search/MultilineSearchbarElement)

### Result Controls

#### SearchAppSort

Sort control component:

```jsx
import { SearchAppSort } from "@js/oarepo_ui/search";

<SearchAppSort />
```

**Source:** [oarepo-ui/SearchAppSort](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search/SearchAppSort)

#### SearchAppResults

Results container component:

```jsx
import { SearchAppResults } from "@js/oarepo_ui/search";

<SearchAppResults>
  <YourResultsComponents />
</SearchAppResults>
```

**Source:** [oarepo-ui/SearchAppResults](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search/SearchAppResults)

### Filter Components

#### ActiveFiltersElement

Active filter tags display:

```jsx
import { ActiveFiltersElement } from "@js/oarepo_ui/search";

<ActiveFiltersElement />
```

**Source:** [oarepo-ui/ActiveFiltersElement](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search/ActiveFiltersElement)

#### ClearFiltersButton

Button to clear all filters:

```jsx
import { ClearFiltersButton } from "@js/oarepo_ui/search";

<ClearFiltersButton />
```

**Source:** [oarepo-ui/ClearFiltersButton](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search/ClearFiltersButton)

### State Components

#### EmptyResultsElement

Empty state component when no results found:

```jsx
import { EmptyResultsElement } from "@js/oarepo_ui/search";

<EmptyResultsElement />
```

**Source:** [oarepo-ui/EmptyResultsElement](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search/EmptyResultsElement)

#### ErrorElement

Error state component for search failures:

```jsx
import { ErrorElement } from "@js/oarepo_ui/search";

<ErrorElement />
```

**Source:** [oarepo-ui/ErrorElement](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search/ErrorElement)

### Pagination & Info Components

#### ResultCount

Result count display:

```jsx
import { ResultCount } from "@js/oarepo_ui/search";

<ResultCount />
```

**Source:** [oarepo-ui/ResultCount](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search/ResultCount)

#### ResultsPerPageLabel

Results per page label:

```jsx
import { ResultsPerPageLabel } from "@js/oarepo_ui/search";

<ResultsPerPageLabel />
```

**Source:** [oarepo-ui/ResultsPerPageLabel](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search/ResultsPerPageLabel)

#### SmallPagination

Pagination component:

```jsx
import { SmallPagination } from "@js/oarepo_ui/search";

<SmallPagination />
```

**Source:** [oarepo-ui/SmallPagination](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search/SmallPagination)

## Further Reading

<Cards>
  <Card
    title="Deposit form components"
    href="/customize/model_ui/deposit_components"
  >
    Record deposit form components
  </Card>
  <Card
    title="Search page"
    href="/customize/model_ui/search"
  >
    Search page configuration
  </Card>
  <Card
    title="react-searchkit"
    href="https://github.com/inveniosoftware/react-searchkit"
  >
    Search library documentation
  </Card>
  <Card
    title="invenio-search-ui"
    href="https://github.com/inveniosoftware/invenio-search-ui"
  >
    Invenio search UI components
  </Card>
  <Card
    title="oarepo-ui search components"
    href="https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/theme/assets/semantic-ui/js/oarepo_ui/search"
  >
    Search components source
  </Card>
</Cards>
