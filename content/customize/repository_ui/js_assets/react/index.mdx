import { Callout, Cards } from 'nextra/components';
import { Card } from "@/components/card";

# React in NRP Repositories

React is used in NRP repositories for building **interactive user interface components** within a server-side rendered application architecture based on InvenioRDM. Unlike traditional Single Page Applications, React here is used for embedding dynamic (mini)apps within Jinja-rendered pages, combining SEO benefits with rich client-side interactivity.

<Callout type="info">
This section covers React-specific topics. For server-side templating with Jinja and JinjaX, see the [Templating overview](/customize/repository_ui/templating).
</Callout>

## Overview

React in NRP repositories powers the most dynamic and interactive parts of the user interface:

- **Search interfaces** - Faceted filtering, result lists, sorting
- **Deposit forms** - Formik-powered inputs, validation, file uploads, and submission
- **Dashboard components** - Real-time data visualization, interactive controls

## Architecture

React is integrated through the following integration flow:

```mermaid
graph LR
    subgraph ServerSide["Server-Side"]
        A[Backend REST APIs]
        B[webpack.py Config]
        C[Webpack/RSPack]
        D[JS Bundles]
        E[Jinja/JinjaX Templates]
        F[DOM mount-point elements with optional data-* attrs]
    end
    subgraph Frontend["Browser"]
        G[React Apps]
        H[react-overridable]
        I[Axios / Fetch]
        J[React Components]
    end

    I -->|queries| A
    B -->|defines entries, NPM deps, aliases| C
    C -->|builds| D
    E -->|includes| D
    E -->|renders| F
    G -->|mounts into| F
    H -->|overrides| J
    G -->|uses| I
    G -->|uses| H
    G -->|renders| J
```

The integration process involves:

1. **Webpack entry points** defined in `webpack.py` files - Python configuration files specifying JavaScript entry points
2. **Template mount points** - Jinja/JinjaX templates render DOM elements with unique IDs that serve as React mount points
3. **JS bundle inclusion** - Templates include pre-built JavaScript bundles via `{{ webpack['bundle.js'] }}` that mount and run React apps
4. **Data passing** - Templates use `data-*` attributes or hidden inputs to pass initial state and configuration to React apps
5. **Component overriding** mechanism for customization without modifying core code

## Explore React Topics

<Cards>
  <Card
    title="Installation & Integration"
    href="/customize/repository_ui/js_assets/react/integration"
  >
    Learn how to add JavaScript entry points, configure webpack, and mount React components within Jinja templates.
  </Card>
  <Card
    title="State Management"
    href="/customize/repository_ui/js_assets/react/state_management"
  >
    Understanding useState, Formik, Context API, and Redux for managing component state.
  </Card>
  <Card
    title="Component Override"
    href="/customize/repository_ui/js_assets/react/overrides"
  >
    How to customize existing components using react-overridable and oarepo-ui overrides.
  </Card>
  <Card
    title="Component Development"
    href="/customize/repository_ui/js_assets/react/components"
  >
    Deep dive into building search apps, deposit forms, and custom components.
  </Card>
</Cards>

## Key Concepts

### Customization

NRP repositories support two customization approaches:

- **Client-Side** - `react-overridable` for customizing React UI components at runtime
- **Server-Side** - `oarepo-ui overrides` generates override configuration for react-overridable based on Flask endpoint routing

See [Component Override](/customize/repository_ui/js_assets/react/overrides) for details.

### State Management

Multiple approaches are used depending on complexity:

| Approach | For |
|----------|------|
| `useState` | Simple component state |
| Formik | Form handling and validation |
| Context API | Cross-component data sharing |
| Redux | Complex app state (search, forms) |

See [State Management](/customize/repository_ui/js_assets/react/state_management) for details.

## Related Resources

<Cards>
  <Card
    title="InvenioRDM Documentation"
    href="https://inveniordm.docs.cern.ch/"
  >
    Official documentation for InvenioRDM
  </Card>
  <Card
    title="react-searchkit"
    href="https://inveniosoftware.github.io/react-searchkit/"
  >
    Search interface library
  </Card>
  <Card
    title="react-overridable"
    href="https://github.com/indico/react-overridable"
  >
    Component customization library
  </Card>
  <Card
    title="Formik"
    href="https://formik.org/"
  >
    Form state management
  </Card>
  <Card
    title="Webpack Configuration"
    href="/customize/repository_ui/webpack"
  >
    Entry point and bundle configuration
  </Card>
</Cards>
