import { Cards, FileTree, Callout, Steps } from "nextra/components";
import { Difficulty } from "@/components/difficulty";
import { Card } from "@/components/card";

# Styling <Difficulty level="intermediate" />

Styling rules let you customize the appearance of existing UI components and elements in your repository site --  
color schemes, typography, spacing, shapes, shadows, and more. It lets you to change the built-in themes to better match your institution's branding guidelines.

## Prerequisites

Before proceeding, ensure you are familiar with:

- **[CSS](https://developer.mozilla.org/en-US/docs/Web/CSS)** â€” the core styling language of the web.
- **[LESS](https://lesscss.org/)** â€” a CSS preprocessor adding variables, nesting, mixins, and more.


<Callout type="warning" emoji="âš ï¸">Any changes made to files mentioned in this docs require running a [development server with assets watcher](/installation/run_instance#run-frontend-assets-builder-optional) for changes to take effect.</Callout>

## Global Variables

Global UI variables for a repository site can be defined or overridden inside the `site.variables` file located under the `assets/less/site/globals` folder in your repository project structure.
This file lets you define or override LESS variables used as defaults by any existing UI element site-wide.

<FileTree>
  <FileTree.Folder name="/assets/semantic-ui/less/site/globals" defaultOpen>
    <FileTree.Folder name="less" defaultOpen>
      <FileTree.Folder name="globals" defaultOpen>
        <FileTree.File name="site.variables" active={true} />
        <FileTree.File name="site.overrides" active={false} />
      </FileTree.Folder>
    </FileTree.Folder>
  </FileTree.Folder>
</FileTree>

For a complete list of possible LESS styling variables, please refer to:

<Cards>
  <Card
    title="Invenio Theme Global Variables Reference"
    href="https://github.com/inveniosoftware/invenio-theme/blob/master/invenio_theme/assets/semantic-ui/less/invenio_theme/theme/globals/site.variables"
  />
  <Card
    title="SemanticUI Default Theme Variables Reference"
    href="https://github.com/Semantic-Org/Semantic-UI/blob/master/src/themes/default/globals/site.variables"
  />
  <Card title="InvenioRDM Theming Documentation" href="https://inveniordm.docs.cern.ch/operate/customize/look-and-feel/theme/" />
    
</Cards>

You can also define your own variables here and use it later in your custom styling rules.

## Global Stylesheet

The `site.overrides` is used for global styling rules, such as any font faces or CSS reset styles, that should be applied once and before any other component-specific style
overrides:

<FileTree>
  <FileTree.Folder name="/assets/semantic-ui/less/site/globals" defaultOpen>
    <FileTree.Folder name="less" defaultOpen>
      <FileTree.Folder name="globals" defaultOpen>
        <FileTree.File name="site.variables" active={false} />
        <FileTree.File name="site.overrides" active={true} />
      </FileTree.Folder>
    </FileTree.Folder>
  </FileTree.Folder>
</FileTree>


## Customize Individual UI Components

To customize the appearance of a specific UI component, you can override either its default variables and/or style rules.

For a full list of UI components available in a NRP repository site for you to customize, please refer to the:

<Cards>
  <Cards.Card
    title="Semantic UI docs"
    href="https://semantic-ui.com/introduction/getting-started.html"
  />
  <Cards.Card
    title="Default Semantic UI component style definitions"
    href="https://github.com/Semantic-Org/Semantic-UI/tree/master/src/definitions"
  />
</Cards>

Here's an example of how to customize the  [`Button`](https://semantic-ui.com/elements/button.html) component:

### Using Variable Overrides

Look up the default variable definitions for the component you want to customize under the default `{componentType}/{component}.variables` definition
and find out a variable that you want to tweak to get the desired effect. Then override that variable by defining it in the `{componentType}/{component}.variables` file under the `/assets/semantic-ui/less/site/` folder structure in your repository project.

<Cards>
  <Cards.Card
    title="Default SemanticUI component variables"
    href="https://github.com/Semantic-Org/Semantic-UI/tree/master/src/themes/default"
  />
  <Cards.Card
    title="Default Invenio Theme component variables"
    href="https://github.com/inveniosoftware/invenio-theme/tree/master/invenio_theme/assets/semantic-ui/less/invenio_theme/theme"
  />
</Cards>

If we were tasked to **tweak the buttons to have a **shadow** of size `16px` and that cool rounded borders with radius of `8px`**, we need to go through the following process:

<Steps>
#### Find the right variable names

Look up the correct variable names in the default [button.variables](https://github.com/Semantic-Org/Semantic-UI/blob/master/src/themes/default/elements/button.variables) file.

We can see there, that the variables controlling the border radius and shadows are:

```less filename="/Semantic-UI//src/themes/default/elements/button.variables" copy {1,3}
@borderRadius: @defaultBorderRadius;
/* ... */
@shadowDistance: 0em;
@shadowOffset: (@shadowDistance / 2);
@shadowBoxShadow: 0px -@shadowDistance 0px 0px @borderColor inset;
```

<Callout emoji="ðŸ’¡">
  When unsure about which variable controls what styles/appearance properties or what
  it's being used for, you might need to consult the
  [definition](https://github.com/Semantic-Org/Semantic-UI/tree/master/src/definitions)
  of the component of interest.
</Callout>

#### Create a `.variables` file with customizations

In order to override values of these LESS variables, we create a corresponding `button.variables` file. We need to respect the theme folder structure as imposed by Semantic UI theming system:

`{componentType}s/{componentName}.variables`

As the Button is a [component of type `element`](https://github.com/Semantic-Org/Semantic-UI/blob/master/src/definitions/elements/button.less#L15), the correct path for that file would be: `/assets/semantic-ui/less/site/elements/button.variables`. Place the variables that you want to override there and you are done!

```less filename="/assets/semantic-ui/less/site/elements/button.variables" copy
@borderRadius: 8px;
@shadowDistance: 16px;
```

<Callout type="info" emoji="â„¹ï¸">
  You might need to manually create the folder structure if it doesn't exist
  yet.
</Callout>

</Steps>

### Style overrides

For situations, where there is no suitable variable defined on the component you want to tweak, you can completely override or add your own style rules for such a component.

For example, there is no way to affect button's `min-height` attribute using LESS variables. If we were tasked to **change buttons on our site to have
`min-height` of `2rem`**, we need to do the following:

<Steps>
#### Find the rule you want to override
Look up styles definition (`.less` file) of your component of interest, e.g. for our [button](
https://github.com/Semantic-Org/Semantic-UI/blob/master/src/definitions/elements/button.less#L24-L57) (we can see the rule
controlling `min-height` there, it is `ui.button`):

```less filename="/Semantic-Org/Semantic-UI/blob/master/src/definitions/elements/button.less" copy {5,9}
/*******************************
            Button
*******************************/

.ui.button {
  cursor: pointer;
  display: inline-block;

  min-height: 1em;

  outline: none;
  border: none;
  vertical-align: @verticalAlign;
  background: @background;
  color: @textColor;

  font-family: @fontFamily;
  // ...
}
```

#### Define custom rules in overrides

Using a similar approach to [overriding variables](#using-variable-overrides), we put our style rules 
into a custom `.overrides` file. The path needs to respect the theme folder structure as imposed by the Semantic UI:

`/{componentType}s/{componentName}.overrides`

We then redefine the `ui.button` style there:

```less filename="/assets/semantic-ui/less/site/elements/button.overrides" copy {5}
.ui.button {
  cursor: pointer;
  display: inline-block;

  min-height: 2em;

  outline: none;
  border: none;
  vertical-align: @verticalAlign;
  background: @background;
  color: @textColor;

  font-family: @fontFamily;
  // ... same declarations as in original rule
}
```

<Callout type="info" emoji="â„¹ï¸">
  You might need to manually create the folder structure if it doesn't exist
  yet.
</Callout>

#### (Optional) Combine with custom variables

You can further combine the two customization approaches described here. Create a custom LESS variable and reference it from this overriden rule, to make `min-height` easily tweakable like other variable-driven button attributes:

```less filename="/assets/semantic-ui/less/site/elements/button.variables" copy
@minHeight: 2rem;
```

```less filename="/assets/semantic-ui/less/site/elements/button.overrides" copy {5}
.ui.button {
  cursor: pointer;
  display: inline-block;

  min-height: @minHeight;
  // ... same declarations as above
```
</Steps>
