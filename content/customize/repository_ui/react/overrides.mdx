import { Callout, Tabs, CodeBlock } from 'nextra/components';

# Component Overriding

NRP repositories provide two distinct mechanisms for overriding UI components. Understanding which approach to use depends on what you're trying to customize.

<Callout type="info">
During development, you can enable discovery mode by calling `reactOverridableEnableDevMode()` to see labels showing unique IDs when hovering over overridable elements in the browser.
</Callout>

## Client-Side Overriding (react-overridable)

The [react-overridable](https://github.com/indico/react-overridable) library allows customization of React components at runtime in the browser. This is the most common approach for customizing UI elements.

### How It Works

Base components in the application are wrapped with an `<Overridable id="unique-component-id">` element. Custom implementations are registered in an `overriddenComponents` map and injected through React context.

### Overriding Strategies

There are three ways to customize components:

#### 1. Parametrize

Pass additional or modified props to existing components without changing their rendering logic:

```jsx
import { parametrize } from "react-overridable";

const SearchAppFacetsWithProps = parametrize(SearchAppFacets, {
  allVersionsToggle: true,
});

export const componentOverrides = {
  [`${overridableIdPrefix}.SearchApp.facets`]: SearchAppFacetsWithProps,
};
```

#### 2. Override Render Elements

Replace specific parts of a component's rendering while keeping the overall structure intact. This is useful when you want to customize just a portion of a component.

#### 3. Replace Component

Completely replace an existing component with a custom implementation:

```jsx
import ResultsListItem from "./ResultsListItem.jsx";

export const componentOverrides = {
  [`${overridableIdPrefix}.ResultsList.item`]: ResultsListItem,
};
```

### Finding Component IDs

Use React Dev Tools to discover the overridable IDs:

1. Install the [React Dev Tools browser extension](https://react.dev/learn/react-developer-tools)
2. Enable discovery mode with `reactOverridableEnableDevMode()`
3. Hover over components in your application to see their overridable IDs

## Server-Side Overriding (oarepo-ui overrides)

The [OARepo UI overrides system](https://github.com/oarepo/oarepo-ui/tree/main/oarepo_ui/overrides) provides Python-based customization at the server level. This approach is used when you need to override templates, services, or view logic.

### Comparison

| Aspect | react-overridable (Client-Side) | oarepo-ui overrides (Server-Side) |
|--------|----------------------------------|-----------------------------------|
| **Location** | React/front-end code | Python/back-end code |
| **Mechanism** | Registers React components via props | Registers Python objects that the server renders |
| **Scope** | UI widgets rendered by React | Template rendering, service wiring, and static assets |
| **Timing** | Runtime in the browser | Application startup on the server |

### When to Use Each

<Callout type="warning">
Choose the right approach based on what you're customizing:
</Callout>

- **Use react-overridable** when customizing React UI components (search results, form fields, buttons, etc.)
- **Use oarepo-ui overrides** when customizing server-side logic (templates, service wiring, view configuration)

## Typical Override Ids

### Search App Components

Override identifiers for search applications use the format `{model-name}.Search.{component}`:

```
Documents.Search.ActiveFilters.element
Documents.Search.SearchApp.facets
Documents.Search.SearchApp.results
Documents.Search.ResultsList.item
Documents.Search.BucketAggregation.element
Documents.Search.SearchApp.sort
```

### Form Components

Override identifiers for forms use the format `{model-name}.Form.{component}`:

```
Documents.Form.FormActions.container
Documents.Form.FormFields.container
Documents.DepositForm.layout
```

## Related Resources

- [react-overridable GitHub Repository](https://github.com/indico/react-overridable) - Library documentation
- [React Dev Tools](https://react.dev/learn/react-developer-tools) - Browser extension for inspecting React components
- [Component Development](/customize/repository_ui/react/components) - Building custom components
